<Page x:Class="DicomViewer.OpenSilverApp.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:views="clr-namespace:DicomViewer.OpenSilverApp.Views"
      xmlns:viewmodels="clr-namespace:DicomViewer.OpenSilverApp.ViewModels"
      mc:Ignorable="d"
      Background="#1E1E1E">

    <Page.Resources>
        <!-- ViewModel-View 매핑 DataTemplates (x:Key 필수) -->
        <!-- ViewModel-View mapping DataTemplates (x:Key required) -->
        <DataTemplate x:Key="TciaExplorerViewTemplate">
            <views:TciaExplorerView />
        </DataTemplate>
        <DataTemplate x:Key="ViewerViewTemplate">
            <views:ViewerView />
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ===== 상단 도구 모음 / Top Toolbar ===== -->
        <Border Grid.Row="0" Background="#2D2D30" Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- 왼쪽 로고 + 버튼들 / Left logo + buttons -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <!-- 로고 / Logo -->
                    <TextBlock Text="&#xE8A1;"
                               FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                               FontSize="24"
                               Foreground="#0078D4"
                               VerticalAlignment="Center"
                               Margin="0,0,12,0" />

                    <Button Content="TCIA Explorer"
                            Command="{Binding NavigateToTciaExplorerCommand}"
                            Padding="12,6"
                            Margin="0,0,4,0" />

                    <Button Content="Viewer"
                            Command="{Binding NavigateToViewerCommand}"
                            Padding="12,6" />
                </StackPanel>

                <!-- 오른쪽 정보 / Right info -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="DICOM Viewer (OpenSilver)"
                               Foreground="#AAAAAA"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                    <TextBlock Text="v2.0"
                               Foreground="#666666"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- 메인 콘텐츠 영역 / Main content area -->
        <!-- OpenSilver에서는 DataType 기반 자동 매핑이 제한적이므로 코드비하인드에서 처리 -->
        <!-- In OpenSilver, DataType-based auto mapping is limited, so handle in code-behind -->
        <ContentControl x:Name="MainContent" Grid.Row="1" />

        <!-- ===== 하단 상태 표시줄 / Bottom status bar ===== -->
        <Border Grid.Row="2" Padding="12,6" Background="#007ACC">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding StatusMessage}"
                           Foreground="White"
                           FontSize="12"
                           VerticalAlignment="Center" />

                <TextBlock Grid.Column="1"
                           Text="OpenSilver WebAssembly"
                           Foreground="White"
                           FontSize="12"
                           Opacity="0.7"
                           VerticalAlignment="Center" />
            </Grid>
        </Border>
    </Grid>
</Page>
