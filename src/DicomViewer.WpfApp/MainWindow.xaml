<Window x:Class="DicomViewer.WpfApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:DicomViewer.ViewModels;assembly=DicomViewer.ViewModels"
        xmlns:controls="clr-namespace:DicomViewer.UI.Controls;assembly=DicomViewer.UI"
        mc:Ignorable="d"
        Title="DICOM Viewer - Medical Imaging Portfolio"
        Height="800" Width="1200"
        MinHeight="600" MinWidth="800"
        WindowState="Maximized"
        Background="{StaticResource BackgroundBrush}"
        d:DataContext="{d:DesignInstance Type=viewmodels:MainWindowViewModel}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- ===== 상단 도구 모음 / Top Toolbar ===== -->
        <Border Grid.Row="0" Background="{StaticResource SurfaceHoverBrush}" Padding="12,8">
            <DockPanel>
                <!-- 왼쪽 로고 + 버튼들 / Left logo + buttons -->
                <StackPanel DockPanel.Dock="Left" Orientation="Horizontal">
                    <!-- 로고 / Logo -->
                    <TextBlock Text="&#xE8A1;"
                               FontFamily="Segoe Fluent Icons, Segoe MDL2 Assets"
                               FontSize="24"
                               Foreground="{StaticResource PrimaryBrush}"
                               VerticalAlignment="Center"
                               Margin="0,0,12,0" />

                    <controls:IconButton Icon="&#xE774;"
                                         Text="TCIA Explorer"
                                         ShowText="True"
                                         Orientation="Horizontal"
                                         Command="{Binding NavigateToTciaExplorerCommand}"
                                         Margin="0,0,4,0" />

                    <controls:IconButton Icon="&#xE7B3;"
                                         Text="Viewer"
                                         ShowText="True"
                                         Orientation="Horizontal"
                                         Command="{Binding NavigateToViewerCommand}" />
                </StackPanel>

                <!-- 오른쪽 정보 / Right info -->
                <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="DICOM Viewer Portfolio"
                               Foreground="{StaticResource ForegroundSecondaryBrush}"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                    <TextBlock Text="v2.0"
                               Foreground="{StaticResource ForegroundSubtleBrush}"
                               VerticalAlignment="Center"
                               Margin="8,0,0,0" />
                </StackPanel>

                <Border />
            </DockPanel>
        </Border>

        <!-- 메인 콘텐츠 영역 (DataTemplate 매핑) / Main content area (DataTemplate mapping) -->
        <ContentControl Grid.Row="1"
                        Content="{Binding CurrentViewModel}" />

        <!-- ===== 하단 상태 표시줄 / Bottom status bar ===== -->
        <Border Grid.Row="2" Padding="12,6">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Background" Value="{StaticResource PrimaryBrush}" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsStatusError}" Value="True">
                            <Setter Property="Background" Value="{StaticResource ErrorBrush}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="{Binding StatusMessage}"
                           Foreground="White"
                           FontSize="12"
                           VerticalAlignment="Center" />

                <TextBlock Grid.Column="1"
                           Text="{Binding Source={x:Static sys:DateTime.Now}, StringFormat=HH:mm:ss}"
                           Foreground="White"
                           FontSize="12"
                           Opacity="0.7"
                           VerticalAlignment="Center"
                           xmlns:sys="clr-namespace:System;assembly=mscorlib" />
            </Grid>
        </Border>
    </Grid>
</Window>
