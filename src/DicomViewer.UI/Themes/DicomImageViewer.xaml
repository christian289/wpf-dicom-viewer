<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:DicomViewer.UI.Controls">

    <SolidColorBrush x:Key="ViewerBackgroundBrush" Color="#1E1E1E" />
    <SolidColorBrush x:Key="ViewerBorderBrush" Color="#3E3E3E" />
    <SolidColorBrush x:Key="OverlayTextBrush" Color="#FFFFFF" />
    <SolidColorBrush x:Key="OverlayBackgroundBrush" Color="#80000000" />

    <Style TargetType="{x:Type controls:DicomImageViewer}">
        <Setter Property="Background" Value="{StaticResource ViewerBackgroundBrush}" />
        <Setter Property="BorderBrush" Value="{StaticResource ViewerBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="Focusable" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:DicomImageViewer}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid ClipToBounds="True">
                            <!-- DICOM 이미지 / DICOM Image -->
                            <Image x:Name="PART_Image"
                                   Source="{TemplateBinding ImageSource}"
                                   Stretch="None"
                                   RenderOptions.BitmapScalingMode="NearestNeighbor"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />

                            <!-- 좌상단 오버레이: 환자 정보 / Top-left overlay: Patient info -->
                            <Border Background="{StaticResource OverlayBackgroundBrush}"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Top"
                                    Margin="10"
                                    Padding="8"
                                    CornerRadius="4">
                                <StackPanel>
                                    <TextBlock Text="{TemplateBinding PatientName}"
                                               Foreground="{StaticResource OverlayTextBrush}"
                                               FontFamily="Consolas"
                                               FontSize="12" />
                                </StackPanel>
                            </Border>

                            <!-- 좌하단 오버레이: W/L 정보 / Bottom-left overlay: W/L info -->
                            <Border Background="{StaticResource OverlayBackgroundBrush}"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Bottom"
                                    Margin="10"
                                    Padding="8"
                                    CornerRadius="4">
                                <StackPanel>
                                    <TextBlock Foreground="{StaticResource OverlayTextBrush}"
                                               FontFamily="Consolas"
                                               FontSize="12">
                                        <Run Text="W: " />
                                        <Run Text="{Binding WindowWidth, RelativeSource={RelativeSource TemplatedParent}, StringFormat=F0}" />
                                        <Run Text=" L: " />
                                        <Run Text="{Binding WindowCenter, RelativeSource={RelativeSource TemplatedParent}, StringFormat=F0}" />
                                    </TextBlock>
                                    <TextBlock Foreground="{StaticResource OverlayTextBrush}"
                                               FontFamily="Consolas"
                                               FontSize="12">
                                        <Run Text="Zoom: " />
                                        <Run Text="{Binding ZoomFactor, RelativeSource={RelativeSource TemplatedParent}, StringFormat=P0}" />
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 우하단 오버레이: 슬라이스 정보 / Bottom-right overlay: Slice info -->
                            <Border Background="{StaticResource OverlayBackgroundBrush}"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Bottom"
                                    Margin="10"
                                    Padding="8"
                                    CornerRadius="4">
                                <TextBlock Foreground="{StaticResource OverlayTextBrush}"
                                           FontFamily="Consolas"
                                           FontSize="12">
                                    <Run Text="Slice: " />
                                    <Run Text="{Binding CurrentSlice, RelativeSource={RelativeSource TemplatedParent}}" />
                                    <Run Text=" / " />
                                    <Run Text="{Binding TotalSlices, RelativeSource={RelativeSource TemplatedParent}}" />
                                </TextBlock>
                            </Border>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
